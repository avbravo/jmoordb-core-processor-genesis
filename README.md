
# JMoordb-core

Framework Java para bases de datos NoSQL


[Libro](http://leanpub.com/jmoordbcore)

Codigo base para los proyectos que implementan jmoordb-core-procesor


```
   @GeneratedValue(strategy = GenerationType.IDENTITY)
   @GeneratedValue(strategy = GenerationType.AUTO)

GenerationType.AUTO
GenerationType.IDENTITY
GenerationType.SEQUENCE
GenerationType.TABLE

GenerationType.AUTO
AUTO is the default strategy for @GeneratedValue. If we just want to have a primary key, we can use the AUTO strategy. The JPA provider will choose an appropriate strategy for the underlying database:


 GenerationType.IDENTITY
The IDENTITY strategy relies on the database auto-increment column. The database generates the primary key after each insert operation. JPA assigns the primary key value after performing the insert operation or upon transaction commit:

GenerationType.SEQUENCE
By using the SEQUENCE strategy, JPA generates the primary key using a database sequence. We first need to create a sequence on the database side before applying this strategy:


The TABLE strategy generates the primary key from a table and works the same regardless of the underlying database.

We need to create a generator table on the database side to generate the primary key. The table should at least have two columns: one column to represent the generatorâ€™s name and another to store the primary key value.



```
ObjectID layout
0	1	2	3|	4	5	6|	7	8	9	10	11
time	machine	pid	inc



.UUID, OBJECTID, NONE, AUTO
## Cambiar @Id

* autogeneratedActive por  strategy
*  AutogeneratedActive.UUID por  GenerationType.UUID


```
@Id(autogeneratedActive = AutogeneratedActive.UUID)
    private UUID id;
``
Quedaria

```
@Id(strategy= GenerationType.UUID)
    private UUID id;

```
---

## Sporte para ObjectId

Reglas:

1. Se puede utilizar como llave primaria @Id
@Id
ObjectId _id;

* Se debe llamar ObjectId _id; para que coincia con el atributo _id generado por MongoDB.
* Solo aplica a @Entity y @ViewEntity

2. Se puede utilizar como columna @Column

@Column
private ObjectId _id;

* Aplica a @Entity @ViewEntity @Embeddadble



## Soporte para UUID

Reglas:

1. Se puede utilizar como llave primaria @Id
@Id
ObjectId _id;

* Se debe llamar ObjectId _id; para que coincia con el atributo _id generado por MongoDB.
* Solo aplica a @Entity y @ViewEntity

2. No aplica para columna @Column



// generar UUID
   UUID uuid = UUID.randomUUID();
        String uuidAsString = uuid.toString();


// convertir a UUID
idUuidMongo.setId(UUID.fromString(document_.getString("id")));